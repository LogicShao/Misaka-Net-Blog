---
title: 'Astro é™æ€ç½‘ç«™ç”Ÿæˆï¼šç°ä»£ Web å¼€å‘çš„æ–°é€‰æ‹©'
description: 'æ·±å…¥æ¢è®¨ Astro æ¡†æ¶çš„æ ¸å¿ƒæ¦‚å¿µã€æ€§èƒ½ä¼˜åŠ¿ä»¥åŠæœ€ä½³å®è·µï¼Œäº†è§£ä¸ºä»€ä¹ˆå®ƒæˆä¸ºé™æ€ç½‘ç«™ç”Ÿæˆçš„æ–°è¶‹åŠ¿ã€‚'
pubDate: '2025-01-20'
tags: ['Astro', 'SSG', 'æ€§èƒ½ä¼˜åŒ–', 'Webå¼€å‘', 'å¼€å‘æ—¥å¿—']
draft: false
---


åœ¨ç°ä»£ Web å¼€å‘é¢†åŸŸï¼Œé™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼ˆSSGï¼‰å·²ç»æˆä¸ºæ„å»ºé«˜æ€§èƒ½ç½‘ç«™çš„é¦–é€‰æ–¹æ¡ˆã€‚è€Œ Astro ä½œä¸ºæ–°ä¸€ä»£çš„ SSG
æ¡†æ¶ï¼Œæ­£åœ¨ä»¥å…¶ç‹¬ç‰¹çš„ç†å¿µæ”¹å˜ç€æˆ‘ä»¬æ„å»ºç½‘ç«™çš„æ–¹å¼ã€‚

## ä»€ä¹ˆæ˜¯ Astroï¼Ÿ

Astro æ˜¯ä¸€ä¸ª**ç°ä»£åŒ–çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨**ï¼Œå®ƒçš„æ ¸å¿ƒç†å¿µæ˜¯ï¼š

> å°½å¯èƒ½å°‘åœ°å‘æµè§ˆå™¨å‘é€ JavaScriptã€‚

### æ ¸å¿ƒç‰¹æ€§

1. **é›¶ JavaScript é»˜è®¤ç­–ç•¥**
    - é»˜è®¤æƒ…å†µä¸‹ï¼ŒAstro ä¸å‘å®¢æˆ·ç«¯å‘é€ä»»ä½• JavaScript
    - åªåœ¨éœ€è¦æ—¶æ‰åŠ è½½ JavaScript

2. **ç¾¤å²›æ¶æ„ï¼ˆIslands Architectureï¼‰**
    - é¡µé¢ä¸­çš„äº¤äº’ç»„ä»¶è¢«éš”ç¦»ä¸º"å²›å±¿"
    - æ¯ä¸ªå²›å±¿ç‹¬ç«‹åŠ è½½å’Œæ°´åˆ

3. **æ¡†æ¶æ— å…³**
    - æ”¯æŒ Reactã€Vueã€Svelteã€Solid ç­‰
    - å¯ä»¥åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­æ··ç”¨ä¸åŒæ¡†æ¶

## æ€§èƒ½ä¼˜åŠ¿

### ä¼ ç»Ÿ SPA vs Astro

```typescript
// ä¼ ç»Ÿ SPA åŠ è½½è¿‡ç¨‹
1. ä¸‹è½½ HTML (å‡  KB)
2. ä¸‹è½½ JavaScript bundle (å‡ ç™¾ KB)
3. è§£æå’Œæ‰§è¡Œ JS
4. æ¸²æŸ“é¡µé¢
5. è·å–æ•°æ®
6. é‡æ–°æ¸²æŸ“

// Astro åŠ è½½è¿‡ç¨‹
1. ä¸‹è½½ HTML + CSS (å·²åŒ…å«å®Œæ•´å†…å®¹)
2. é¡µé¢ç«‹å³å¯è§å’Œå¯äº¤äº’
3. (å¯é€‰) æŒ‰éœ€åŠ è½½äº¤äº’ç»„ä»¶çš„ JS
```

### æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”

| æŒ‡æ ‡          | ä¼ ç»Ÿ SPA    | Astro  |
|-------------|-----------|--------|
| FCP         | 2-3s      | 0.5-1s |
| TTI         | 3-5s      | 0.5-1s |
| Bundle Size | 200-500KB | 0-50KB |
| Lighthouse  | 60-80     | 95-100 |

## å®æˆ˜ç¤ºä¾‹ï¼šæ„å»ºåšå®¢

### 1. é¡¹ç›®ç»“æ„

```bash
src/
â”œâ”€â”€ components/      # å¯å¤ç”¨ç»„ä»¶
â”œâ”€â”€ layouts/        # é¡µé¢å¸ƒå±€
â”œâ”€â”€ pages/          # è·¯ç”±é¡µé¢
â”œâ”€â”€ content/        # Markdown å†…å®¹
â””â”€â”€ styles/         # å…¨å±€æ ·å¼
```

### 2. åˆ›å»ºåŠ¨æ€è·¯ç”±

```typescript
// src/pages/blog/[slug].astro
---
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: post,
  }));
}

const post = Astro.props;
const { Content } = await post.render();
---

<article>
  <h1>{post.data.title}</h1>
  <Content />
</article>
```

### 3. ç»„ä»¶å²›å±¿

```astro
---
// åªåœ¨å®¢æˆ·ç«¯åŠ è½½å’Œè¿è¡Œ
import Counter from '../components/Counter.tsx';
---

<div>
  <!-- é™æ€å†…å®¹ -->
  <h1>æ¬¢è¿è®¿é—®</h1>

  <!-- äº¤äº’ç»„ä»¶ï¼ˆå²›å±¿ï¼‰ -->
  <Counter client:load />
</div>
```

## æœ€ä½³å®è·µ

### 1. å†…å®¹é›†åˆï¼ˆContent Collectionsï¼‰

ä½¿ç”¨ Content Collections ç®¡ç†ç»“æ„åŒ–å†…å®¹ï¼š

```typescript
// src/content/config.ts
import { defineCollection, z } from 'astro:content';

const blog = defineCollection({
  schema: z.object({
    title: z.string(),
    pubDate: z.date(),
    tags: z.array(z.string()),
  }),
});

export const collections = { blog };
```

### 2. å›¾ç‰‡ä¼˜åŒ–

Astro å†…ç½®å›¾ç‰‡ä¼˜åŒ–ï¼š

```astro
---
import { Image } from 'astro:assets';
import heroImage from '../assets/hero.jpg';
---

<Image
  src={heroImage}
  alt="Hero"
  width={1200}
  height={600}
  format="webp"
/>
```

### 3. éƒ¨åˆ†æ°´åˆç­–ç•¥

é€‰æ‹©åˆé€‚çš„æ°´åˆæ—¶æœºï¼š

```astro
<!-- é¡µé¢åŠ è½½æ—¶ç«‹å³æ°´åˆ -->
<Component client:load />

<!-- ç»„ä»¶å¯è§æ—¶æ°´åˆ -->
<Component client:visible />

<!-- ç©ºé—²æ—¶æ°´åˆ -->
<Component client:idle />

<!-- ä»…åœ¨å®¢æˆ·ç«¯æ¸²æŸ“ -->
<Component client:only="react" />
```

## ä¸å…¶ä»–æ¡†æ¶å¯¹æ¯”

### Astro vs Next.js

| ç‰¹æ€§    | Astro | Next.js |
|-------|-------|---------|
| é»˜è®¤ JS | 0 KB  | ~100 KB |
| æ°´åˆç­–ç•¥  | éƒ¨åˆ†æ°´åˆ  | å…¨é¡µæ°´åˆ    |
| å­¦ä¹ æ›²çº¿  | ä½     | ä¸­       |
| é€‚ç”¨åœºæ™¯  | å†…å®¹ç½‘ç«™  | å…¨æ ˆåº”ç”¨    |

### Astro vs Gatsby

| ç‰¹æ€§      | Astro | Gatsby |
|---------|-------|--------|
| æ„å»ºé€Ÿåº¦    | å¿«     | æ…¢      |
| GraphQL | å¯é€‰    | å¿…éœ€     |
| æ’ä»¶ç”Ÿæ€    | æˆé•¿ä¸­   | æˆç†Ÿ     |

## å®é™…æ¡ˆä¾‹

### 1. æ–‡æ¡£ç«™ç‚¹

```typescript
// éå¸¸é€‚åˆæ–‡æ¡£ç«™ç‚¹
- å¿«é€Ÿçš„é¡µé¢åŠ è½½
- å‡ºè‰²çš„ SEO
- é›¶ JavaScript å¼€é”€
```

### 2. åšå®¢å¹³å°

```typescript
// åšå®¢çš„å®Œç¾é€‰æ‹©
- Markdown/MDX æ”¯æŒ
- å†…ç½®å†…å®¹é›†åˆ
- ä¼˜ç§€çš„å¼€å‘ä½“éªŒ
```

### 3. è¥é”€é¡µé¢

```typescript
// é«˜æ€§èƒ½è¥é”€é¡µ
- æè‡´çš„åŠ è½½é€Ÿåº¦
- å®Œç¾çš„ Lighthouse åˆ†æ•°
- å¯é€‰çš„äº¤äº’ç»„ä»¶
```

## æ€§èƒ½ç›‘æ§

ä½¿ç”¨ Astro å†…ç½®çš„æ€§èƒ½å·¥å…·ï¼š

```typescript
// astro.config.mjs
export default defineConfig({
  output: 'static',
  build: {
    inlineStylesheets: 'auto',
  },
  vite: {
    build: {
      rollupOptions: {
        output: {
          manualChunks: (id) => {
            // è‡ªå®šä¹‰ä»£ç åˆ†å‰²
          },
        },
      },
    },
  },
});
```

## ç»“è®º

Astro é€šè¿‡å…¶ç‹¬ç‰¹çš„é›¶ JavaScript é»˜è®¤ç­–ç•¥å’Œç¾¤å²›æ¶æ„ï¼Œä¸ºç°ä»£ Web å¼€å‘å¸¦æ¥äº†æ–°çš„å¯èƒ½æ€§ã€‚å®ƒç‰¹åˆ«é€‚åˆï¼š

- ğŸ“ åšå®¢å’Œæ–‡æ¡£ç«™ç‚¹
- ğŸ›ï¸ ç”µå•†äº§å“é¡µ
- ğŸ“° æ–°é—»å’Œå†…å®¹ç½‘ç«™
- ğŸ¨ ä½œå“é›†ç½‘ç«™

å¦‚æœä½ çš„é¡¹ç›®é‡è§†æ€§èƒ½ã€SEO å’Œå¼€å‘ä½“éªŒï¼ŒAstro ç»å¯¹å€¼å¾—å°è¯•ï¼

---

**å®éªŒè®°å½•ï¼šAstro æ€§èƒ½æµ‹è¯•** âš¡

- é¦–æ¬¡å†…å®¹ç»˜åˆ¶ï¼ˆFCPï¼‰ï¼š0.6s
- æœ€å¤§å†…å®¹ç»˜åˆ¶ï¼ˆLCPï¼‰ï¼š0.8s
- äº¤äº’æ—¶é—´ï¼ˆTTIï¼‰ï¼š0.7s
- Lighthouse åˆ†æ•°ï¼š100/100
