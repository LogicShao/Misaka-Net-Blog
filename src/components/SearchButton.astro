---
// SearchButton.astro - 搜索按钮组件
---

<button
  id="search-button"
  type="button"
  class="flex items-center space-x-2 px-3 py-1.5 rounded-lg border transition-all duration-300 hover:border-misaka-blue hover:shadow-lg hover:shadow-misaka-blue/20"
  style="border-color: var(--border-color); background-color: var(--bg-secondary);"
  aria-label="搜索"
>
  <svg class="w-5 h-5" style="color: var(--text-secondary);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
  </svg>
  <span class="hidden sm:inline text-sm" style="color: var(--text-secondary);">搜索</span>
  <kbd class="hidden lg:inline-flex items-center px-1.5 py-0.5 text-xs font-mono rounded"
       style="background-color: var(--bg-primary); border: 1px solid var(--border-color); color: var(--text-tertiary);">
    ⌘K
  </kbd>
</button>

<script>
  const searchButton = document.getElementById('search-button');
  if (searchButton) {
    searchButton.addEventListener('click', () => {
      const event = new CustomEvent('open-search');
      window.dispatchEvent(event);
    });
  }

  // 快捷键支持 (Cmd/Ctrl + K)
  document.addEventListener('keydown', (e) => {
    if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
      e.preventDefault();
      const event = new CustomEvent('open-search');
      window.dispatchEvent(event);
    }
  });
</script>
